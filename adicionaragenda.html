<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar Evento</title>

    <link rel="icon" type="image/png" href="Imagens, videos e fivecon/school-time_11698254.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="style.css">

    <script>
        // Carrega cabeÃ§alho
        fetch('cabecalhouser.html')
            .then(r => r.text())
            .then(html => document.getElementById('menu').innerHTML = html);

        // Carrega rodapÃ©
        fetch('rodape.html')
            .then(r => r.text())
            .then(html => document.getElementById('rodape').innerHTML = html);
    </script>
</head>

<body class="bg-light min-vh-100 d-flex flex-column">

<div id="menu"></div>

<main class="container-fluid flex-fill d-flex align-items-start justify-content-center py-5">

    <div class="card shadow p-4 w-100" style="max-width: 1000px;">
        <h3 class="mb-3">Adicionar Evento</h3>

        <form id="formAgenda">

            <!-- â­ NOVO CAMPO ADICIONADO: NOME DO EVENTO -->
            <div class="mb-3">
                <label class="form-label">Nome do Evento</label>
                <input type="name" id="nomeEvento" class="form-control" required>
            </div>

            <!-- DESCRIÃ‡ÃƒO -->
            <div class="mb-3">
                <label class="form-label">DescriÃ§Ã£o</label>
                <textarea id="descricao" class="form-control" placeholder="(opicional)" ></textarea>
            </div>

            <!-- PRIORIDADE -->
            <div class="mb-3">
                <label class="form-label">Prioridade</label>
                <select id="prioridade" class="form-select" required>
                    <option value="">Selecione...</option>
                    <option value="vermelho">ðŸ”´ Urgente</option>
                    <option value="amarelo">ðŸŸ¡ MÃ©dia</option>
                    <option value="verde">ðŸŸ¢ Baixa</option>
                </select>
            </div>

            <!-- DATA -->
            <div class="mb-3">
                <label class="form-label">Data</label>
                <input type="date" id="data" class="form-control" required>
            </div>

            <button class="btn btn-primary me-2" id="btnSalvar">Salvar</button>
            <a href="principal.html" class="btn btn-danger" id="btnCancelar">Cancelar</a>

        </form>
    </div>

</main>

<div id="rodape"></div>


<script>
// ALERTA PADRÃƒO DO SISTEMA
function mostrarAlerta(msg, tipo = "warning") {
    const alerta = document.createElement("div");
    alerta.className =
        `alert alert-${tipo} text-center position-fixed top-0 start-50 translate-middle-x mt-3 w-50 shadow`;
    alerta.innerText = msg;
    document.body.appendChild(alerta);
    setTimeout(() => alerta.remove(), 2500);
}

document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("formAgenda");

    const nomeEvento = document.getElementById("nomeEvento"); // NOVO CAMPO
    const descricao = document.getElementById("descricao");
    const prioridade = document.getElementById("prioridade");
    const data = document.getElementById("data");
    const btnCancelar = document.getElementById("btnCancelar");

    // ðŸ”’ BLOQUEAR DATAS PASSADAS
    const hoje = new Date().toISOString().split("T")[0];
    data.min = hoje;

    // ðŸ” Verifica se tem dados no formulÃ¡rio
    function formTemDados() {
        return (
            nomeEvento.value.trim() !== "" || 
            prioridade.value !== "" ||
            data.value !== ""
        );
    }

    // âœ” SALVAR
    form.addEventListener("submit", (e) => {
        e.preventDefault();

        if (
            nomeEvento.value.trim() === "" ||  
            prioridade.value === "" ||
            data.value === ""
        ) {
            mostrarAlerta("Preencha todos os campos!", "danger");
            return;
        }

        // SUCESSO
        mostrarAlerta("Evento adicionado com sucesso!", "success");

        // Aguarda o alerta sumir
        setTimeout(() => {
            window.location.href = "principal.html";
        }, 1500);
    });

    // âŒ CANCELAR
    btnCancelar.addEventListener("click", (e) => {
        e.preventDefault();

        if (formTemDados()) {
            if (confirm("Tem certeza que deseja cancelar? Os dados serÃ£o perdidos.")) {
                window.location.href = btnCancelar.href;
            }
        } else {
            window.location.href = btnCancelar.href;
        }
    });
});
</script>

</body>
</html>

