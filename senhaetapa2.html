<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Código de Verificação</title>

    <link rel="icon" type="image/png" href="Imagens, videos e fivecon/school-time_11698254.png">

    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Carregar cabeçalho
        fetch('cabecalhoinicial.html')
            .then(resp => resp.text())
            .then(html => document.getElementById('menu').innerHTML = html);

        // Carregar rodapé
        fetch('rodape.html')
            .then(resp => resp.text())
            .then(html => document.getElementById('rodape').innerHTML = html);
    </script>

</head>

<body class="bg-light min-vh-100 d-flex flex-column">

    <div id="menu"></div>

    <main class="container-fluid flex-fill d-flex align-items-center justify-content-center">

        <div class="p-5 bg-white shadow rounded" style="max-width: 700px; width: 100%;">
            <h2 class="text-center mb-4 text-danger">Digite o código enviado</h2>

            <p class="text-center text-muted">Enviamos um código de 4 dígitos para seu e-mail.</p>

            <form id="formCodigo" action="redefinirsenha.html" method="get" class="text-center">

                <div class="d-flex justify-content-center gap-3 mb-4">
                    <input maxlength="1" class="code-input" id="c1">
                    <input maxlength="1" class="code-input" id="c2">
                    <input maxlength="1" class="code-input" id="c3">
                    <input maxlength="1" class="code-input" id="c4">
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn-cadastro">Confirmar</button>
                </div>

                <div class="mt-3 text-center">
                    <a href="redefinirsenha.html">Reenviar código</a>
                </div>

            </form>
        </div>

    </main>

    <div id="rodape"></div>

  <script>
    const inputs = document.querySelectorAll('.code-input');
    const form = document.getElementById('formCodigo');

    // Passar automaticamente para o próximo quadrado
    inputs.forEach((input, index) => {
        input.addEventListener('input', () => {
            input.value = input.value.replace(/\D/g, ""); // só aceita número

            if (input.value.length === 1 && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
        });

        // Voltar no Backspace
        input.addEventListener('keydown', (e) => {
            if (e.key === "Backspace" && !input.value && index > 0) {
                inputs[index - 1].focus();
            }
        });
    });

    // Impedir envio sem 4 dígitos
    form.addEventListener("submit", (e) => {
        const codigo = [...inputs].map(i => i.value).join("");

        if (codigo.length !== 4) {
            e.preventDefault();
            alert("Digite os 4 números do código!");
            return;
        }
    });
                                                                              
    // Reenviar código → resetar campos e foco no primeiro quadrado
    document.querySelector("a[href='redefinirsenha.html']").addEventListener("click", (e) => {
        e.preventDefault();

        inputs.forEach(i => i.value = "");
        inputs[0].focus();

        alert("Código reenviado!");
    });
</script>


</body>
</html>

